<!-- Similar to your previous admin.html but add notification sending -->
<script>
async function sendPush(token,title,body){
  fetch("https://fcm.googleapis.com/fcm/send",{
    method:"POST",
    headers:{
      "Content-Type":"application/json",
      "Authorization":"key=YOUR_SERVER_KEY"
    },
    body: JSON.stringify({to:token,notification:{title,body}})
  });
}

function setResult(color){
  db.collection("admin").doc("result").set({color});
  db.collection("users").get().then(snap=>snap.forEach(doc=>{
    const token=doc.data().fcmToken;
    if(token) sendPush(token,"New Round Result","Result is: "+color);
  }));
}

function approve(id,coins,uid){
  const userRef=db.collection("users").doc(uid);
  userRef.get().then(doc=>{
    if(doc.exists){
      const currentCoins=doc.data().coins||0;
      if(currentCoins>=coins){
        userRef.update({coins:currentCoins-coins});
        db.collection("withdrawals").doc(id).update({status:"Approved"});
        const token=doc.data().fcmToken;
        if(token) sendPush(token,"Withdrawal Approved",coins+" coins approved!");
      }
    }
  });
}
      </script>
