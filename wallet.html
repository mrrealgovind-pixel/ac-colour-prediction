<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Wallet</title>
<style>
body { font-family: Arial; padding: 20px; background: #f5f5f5; }
.box { background:#fff; padding:20px; border-radius:10px; margin-bottom:20px; }
.btn { background:#ff0066; color:#fff; padding:10px 15px; border:none; border-radius:5px; cursor:pointer; }
input[type="file"] { margin-top:10px; }
</style>
</head>
<body>

<h2>Wallet</h2>

<div class="box">
    <h3>Your Coins: <span id="coins">0</span></h3>
</div>

<div class="box">
    <h3>Add Coins</h3>
    <input type="number" id="amount" placeholder="Enter Amount"><br><br>
    
    <h4>Pay on this UPI ID:</h4>
    <p id="upiText">Loading...</p>

    <h4>Upload Screenshot</h4>
    <input type="file" id="ss"><br><br>

    <button class="btn" onclick="submitRecharge()">Proceed to Recharge</button>
</div>

<script>
// Load UPI ID from admin settings
function loadUPI() {
    let upi = localStorage.getItem("admin_upi_id");
    if (!upi) upi = "Not Set by Admin";
    document.getElementById("upiText").innerText = upi;
}
loadUPI();

// Save recharge request
function submitRecharge() {
    let amount = document.getElementById("amount").value;
    let ss = document.getElementById("ss").files[0];

    if (!amount) return alert("Enter amount");
    if (!ss) return alert("Upload screenshot");

    let reader = new FileReader();
    reader.onload = function() {
        let base64img = reader.result;

        let req = {
            amount: amount,
            screenshot: base64img,
            status: "Pending",
            time: new Date().toLocaleString()
        };

        let all = JSON.parse(localStorage.getItem("recharge_requests") || "[]");
        all.push(req);
        localStorage.setItem("recharge_requests", JSON.stringify(all));

        alert("Recharge Request Submitted!");
    };
    reader.readAsDataURL(ss);
}
</script>

</body>
</html>
