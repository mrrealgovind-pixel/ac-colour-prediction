<!DOCTYPE html>
<html>
<head>
<title>Slot Game - AC Colour Prediction</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{background:#111;color:#fff;font-family:Arial,sans-serif;text-align:center;margin:0;padding:0;}
#slotContainer{margin-top:50px;}
button{padding:15px 30px;font-size:18px;border:none;border-radius:8px;margin-top:20px;cursor:pointer;background:#00e676;color:#000;font-weight:bold;}
#result{margin-top:30px;font-size:24px;font-weight:bold;}
</style>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
</head>
<body>
<div id="slotContainer">
<h2>Slot Game</h2>
<button onclick="spin()">Spin</button>
<p id="result">Waiting...</p>
</div>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyAPFM1XnrX1A4cwQPCAkZ4sTMmnwORjx0A",
  authDomain: "ac-colour-prediction.firebaseapp.com",
  projectId: "ac-colour-prediction",
  storageBucket: "ac-colour-prediction.firebasestorage.app",
  messagingSenderId: "471938348888",
  appId: "1:471938348888:web:ac3fc3eb1939eb7cbe172d",
};
firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();

let slotWinRate = 60; // default
let currentLogic = "60_40";

// Load current slot logic from admin settings
async function loadSlotLogic(){
  const doc = await db.collection("slotControl").doc("settings").get();
  if(doc.exists){
    currentLogic = doc.data().logic;
    slotWinRate = doc.data().winRate;
    console.log("Slot Logic Loaded:", currentLogic, slotWinRate);
  }
}
loadSlotLogic();

// Spin function
function spin(){
  // Generate random number 1-100
  const rand = Math.floor(Math.random()*100)+1;
  if(rand <= slotWinRate){
    document.getElementById("result").innerText = "ðŸŽ‰ You Win!";
  } else {
    document.getElementById("result").innerText = "ðŸ˜ž You Lose!";
  }
}

// Optional: real-time update if admin changes logic
db.collection("slotControl").doc("settings").onSnapshot(doc=>{
  if(doc.exists){
    currentLogic = doc.data().logic;
    slotWinRate = doc.data().winRate;
    console.log("Slot Logic Updated:", currentLogic, slotWinRate);
  }
});
</script>
</body>
</html>
